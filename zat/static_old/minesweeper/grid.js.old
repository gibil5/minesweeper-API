
// Is called after the DOM has been loaded
document.addEventListener('DOMContentLoaded', function(){

    // Change the style of the grid, in function of the nr of columns
    var rows = document.getElementById("rows").innerHTML;
    var style_value = `repeat(${rows},1fr)`
    console.log(style_value);
    document.querySelectorAll('[id=grid]').forEach(element=> {
        element.style.setProperty('grid-template-columns', style_value);
    });


    // Fetch get
    const url='http://127.0.0.1:8000/board/';
    fetch(url,
    {
        method: "GET"
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
    })
    .catch(error => {
        console.log('Error', error);
    })


    // Fetch - post
    //const url='http://127.0.0.1:8000/cells/';
    //fetch(url,
    //{
    //    method: "POST",
    //    headers: {'Content-Type':'application/x-www-form-urlencoded'}, // this line is important, if this content-type is not set it wont work
    //    credentials: 'same-origin',
    //    body: 'board_id=35&foo=bar&blah=1'
    //})
    //.then(response => response.json())
    //.then(data => {
    //    console.log(data);
    //})
    //.catch(error => {
    //    console.log('Error', error);
    //}) 


    // Change cell state
    function change_state(cell) {
        let btn = document.getElementById(cell);
        document.getElementById(cell).style.backgroundColor = 'silver';
    }

    // Add event listener to all buttons
    document.querySelectorAll('button').forEach(button => {
        button.onclick = function() {
            let cell = button.dataset.cell         
            change_state(cell)
        }
    })
});
